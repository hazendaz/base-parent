<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>CarsBean.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">fileupload</a> &gt; <a href="index.source.html" class="el_package">com.hazendaz.beans</a> &gt; <span class="el_source">CarsBean.java</span></div><h1>CarsBean.java</h1><pre class="source lang-java linenums">package com.hazendaz.beans;

import java.io.Serializable;
import java.math.BigDecimal;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.Comparator;
import java.util.Iterator;
import java.util.List;

import javax.faces.bean.ViewScoped;
import javax.faces.event.ValueChangeEvent;
import javax.faces.model.SelectItem;
import javax.inject.Inject;
import javax.inject.Named;

import lombok.Data;

import org.slf4j.Logger;

<span class="nc bnc" id="L22" title="All 44 branches missed.">@Data</span>
@Named
@ViewScoped
public class CarsBean implements Serializable {

    private static final long serialVersionUID         = -3832235132261771583L;
    private static final int  DECIMALS                 = 1;
    private static final int  CLIENT_ROWS_IN_AJAX_MODE = 15;
    private static final int  ROUNDING_MODE            = BigDecimal.ROUND_HALF_UP;

    private static void itemToVendorItem(final InventoryItem item, final InventoryVendorItem newItem) {
<span class="nc" id="L33">        newItem.setActivity(item.getActivity());</span>
<span class="nc" id="L34">        newItem.setChangePrice(item.getChangePrice());</span>
<span class="nc" id="L35">        newItem.setChangeSearches(item.getChangeSearches());</span>
<span class="nc" id="L36">        newItem.setDaysLive(item.getDaysLive());</span>
<span class="nc" id="L37">        newItem.setExposure(item.getExposure());</span>
<span class="nc" id="L38">        newItem.setInquiries(item.getInquiries());</span>
<span class="nc" id="L39">        newItem.setMileage(item.getMileage());</span>
<span class="nc" id="L40">        newItem.setMileageMarket(item.getMileageMarket());</span>
<span class="nc" id="L41">        newItem.setModel(item.getModel());</span>
<span class="nc" id="L42">        newItem.setPrice(item.getPrice());</span>
<span class="nc" id="L43">        newItem.setPriceMarket(item.getPriceMarket());</span>
<span class="nc" id="L44">        newItem.setPrinted(item.getPrinted());</span>
<span class="nc" id="L45">        newItem.setStock(item.getStock());</span>
<span class="nc" id="L46">        newItem.setVin(item.getVin());</span>
<span class="nc" id="L47">    }</span>

<span class="nc" id="L49">    private List&lt;InventoryItem&gt;       allInventoryItems    = null;</span>
<span class="nc" id="L50">    private List&lt;InventoryVendorList&gt; inventoryVendorLists = null;</span>
<span class="nc" id="L51">    private int                       currentCarIndex;</span>
<span class="nc" id="L52">    private InventoryItem             editedCar;</span>

<span class="nc" id="L54">    private int                       page                 = 1;</span>

<span class="nc" id="L56">    private int                       clientRows;</span>

    @Inject
<span class="nc" id="L59">    private Logger                    logger;</span>

    public List&lt;InventoryItem&gt; createCar(final String vendor, final String model, final int count) {
<span class="nc" id="L62">        ArrayList&lt;InventoryItem&gt; iiList = null;</span>

        try {
<span class="nc" id="L65">            final int arrayCount = count;</span>
<span class="nc" id="L66">            final InventoryItem[] demoInventoryItemArrays = new InventoryItem[arrayCount];</span>

<span class="nc bnc" id="L68" title="All 2 branches missed.">            for (int j = 0; j &lt; demoInventoryItemArrays.length; j++) {</span>
<span class="nc" id="L69">                final InventoryItem ii = new InventoryItem();</span>

<span class="nc" id="L71">                ii.setVendor(vendor);</span>
<span class="nc" id="L72">                ii.setModel(model);</span>
<span class="nc" id="L73">                ii.setStock(RandomHelper.randomstring(6, 7));</span>
<span class="nc" id="L74">                ii.setVin(RandomHelper.randomstring(17, 17));</span>
<span class="nc" id="L75">                ii.setMileage(new BigDecimal(RandomHelper.rand(5000, 80000)).setScale(CarsBean.DECIMALS,</span>
                        CarsBean.ROUNDING_MODE));
<span class="nc" id="L77">                ii.setMileageMarket(new BigDecimal(RandomHelper.rand(25000, 45000)).setScale(CarsBean.DECIMALS,</span>
                        CarsBean.ROUNDING_MODE));
<span class="nc" id="L79">                ii.setPrice(new Integer(RandomHelper.rand(15000, 55000)));</span>
<span class="nc" id="L80">                ii.setPriceMarket(new BigDecimal(RandomHelper.rand(15000, 55000)).setScale(CarsBean.DECIMALS,</span>
                        CarsBean.ROUNDING_MODE));
<span class="nc" id="L82">                ii.setDaysLive(RandomHelper.rand(1, 90));</span>
<span class="nc" id="L83">                ii.setChangeSearches(new BigDecimal(RandomHelper.rand(0, 5)).setScale(CarsBean.DECIMALS,</span>
                        CarsBean.ROUNDING_MODE));
<span class="nc" id="L85">                ii.setChangePrice(new BigDecimal(RandomHelper.rand(0, 5)).setScale(CarsBean.DECIMALS,</span>
                        CarsBean.ROUNDING_MODE));
<span class="nc" id="L87">                ii.setExposure(new BigDecimal(RandomHelper.rand(0, 5)).setScale(CarsBean.DECIMALS,</span>
                        CarsBean.ROUNDING_MODE));
<span class="nc" id="L89">                ii.setActivity(new BigDecimal(RandomHelper.rand(0, 5)).setScale(CarsBean.DECIMALS,</span>
                        CarsBean.ROUNDING_MODE));
<span class="nc" id="L91">                ii.setPrinted(new BigDecimal(RandomHelper.rand(0, 5)).setScale(CarsBean.DECIMALS,</span>
                        CarsBean.ROUNDING_MODE));
<span class="nc" id="L93">                ii.setInquiries(new BigDecimal(RandomHelper.rand(0, 5)).setScale(CarsBean.DECIMALS,</span>
                        CarsBean.ROUNDING_MODE));
<span class="nc" id="L95">                demoInventoryItemArrays[j] = ii;</span>
            }

<span class="nc" id="L98">            iiList = new ArrayList&lt;InventoryItem&gt;(Arrays.asList(demoInventoryItemArrays));</span>
<span class="nc" id="L99">        } catch (final Exception e) {</span>
<span class="nc" id="L100">            e.printStackTrace();</span>
<span class="nc" id="L101">        }</span>

<span class="nc" id="L103">        return iiList;</span>
    }

    public List&lt;InventoryItem&gt; getAllInventoryItems() {
<span class="nc" id="L107">        synchronized (this) {</span>
<span class="nc bnc" id="L108" title="All 2 branches missed.">            if (this.allInventoryItems == null) {</span>
<span class="nc" id="L109">                this.allInventoryItems = new ArrayList&lt;InventoryItem&gt;();</span>

<span class="nc" id="L111">                this.logger.info(&quot;Started building car list&quot;);</span>
<span class="nc bnc" id="L112" title="All 2 branches missed.">                for (int k = 0; k &lt;= 18; k++) {</span>
                    try {
<span class="nc bnc" id="L114" title="All 20 branches missed.">                        switch (k) {</span>
                            case 0:
<span class="nc" id="L116">                                this.allInventoryItems.addAll(this.createCar(&quot;Chevrolet&quot;, &quot;Corvette&quot;, 5000));</span>
<span class="nc" id="L117">                                this.allInventoryItems.addAll(this.createCar(&quot;Chevrolet&quot;, &quot;Malibu&quot;, 8000));</span>
<span class="nc" id="L118">                                this.allInventoryItems.addAll(this.createCar(&quot;Chevrolet&quot;, &quot;Tahoe&quot;, 6000));</span>

<span class="nc" id="L120">                                break;</span>

                            case 1:
<span class="nc" id="L123">                                this.allInventoryItems.addAll(this.createCar(&quot;Ford&quot;, &quot;Taurus&quot;, 1200));</span>
<span class="nc" id="L124">                                this.allInventoryItems.addAll(this.createCar(&quot;Ford&quot;, &quot;Explorer&quot;, 1100));</span>

<span class="nc" id="L126">                                break;</span>

                            case 2:
<span class="nc" id="L129">                                this.allInventoryItems.addAll(this.createCar(&quot;Nissan&quot;, &quot;Maxima&quot;, 9000));</span>
<span class="nc" id="L130">                                this.allInventoryItems.addAll(this.createCar(&quot;Nissan&quot;, &quot;Frontier&quot;, 6000));</span>

<span class="nc" id="L132">                                break;</span>

                            case 3:
<span class="nc" id="L135">                                this.allInventoryItems.addAll(this.createCar(&quot;Toyota&quot;, &quot;4-Runner&quot;, 7000));</span>
<span class="nc" id="L136">                                this.allInventoryItems.addAll(this.createCar(&quot;Toyota&quot;, &quot;Camry&quot;, 1500));</span>
<span class="nc" id="L137">                                this.allInventoryItems.addAll(this.createCar(&quot;Toyota&quot;, &quot;Avalon&quot;, 1300));</span>

<span class="nc" id="L139">                                break;</span>

                            case 4:
<span class="nc" id="L142">                                this.allInventoryItems.addAll(this.createCar(&quot;GMC&quot;, &quot;Sierra&quot;, 8000));</span>
<span class="nc" id="L143">                                this.allInventoryItems.addAll(this.createCar(&quot;GMC&quot;, &quot;Yukon&quot;, 1000));</span>

<span class="nc" id="L145">                                break;</span>

                            case 5:
<span class="nc" id="L148">                                this.allInventoryItems.addAll(this.createCar(&quot;Infiniti&quot;, &quot;G35&quot;, 6000));</span>
<span class="nc" id="L149">                                this.allInventoryItems.addAll(this.createCar(&quot;Infiniti&quot;, &quot;EX35&quot;, 5000));</span>

<span class="nc" id="L151">                                break;</span>

                            case 6:
<span class="nc" id="L154">                                this.allInventoryItems.addAll(this.createCar(&quot;Infiniti2&quot;, &quot;G35&quot;, 6000));</span>
<span class="nc" id="L155">                                this.allInventoryItems.addAll(this.createCar(&quot;Infiniti2&quot;, &quot;EX35&quot;, 5000));</span>

<span class="nc" id="L157">                                break;</span>

                            case 7:
<span class="nc" id="L160">                                this.allInventoryItems.addAll(this.createCar(&quot;Infiniti3&quot;, &quot;G35&quot;, 6000));</span>
<span class="nc" id="L161">                                this.allInventoryItems.addAll(this.createCar(&quot;Infiniti3&quot;, &quot;EX35&quot;, 5000));</span>

<span class="nc" id="L163">                                break;</span>

                            case 8:
<span class="nc" id="L166">                                this.allInventoryItems.addAll(this.createCar(&quot;Infiniti4&quot;, &quot;G35&quot;, 6000));</span>
<span class="nc" id="L167">                                this.allInventoryItems.addAll(this.createCar(&quot;Infiniti4&quot;, &quot;EX35&quot;, 5000));</span>

<span class="nc" id="L169">                                break;</span>

                            case 9:
<span class="nc" id="L172">                                this.allInventoryItems.addAll(this.createCar(&quot;Infiniti5&quot;, &quot;G35&quot;, 60));</span>
<span class="nc" id="L173">                                this.allInventoryItems.addAll(this.createCar(&quot;Infiniti5&quot;, &quot;EX35&quot;, 50));</span>

<span class="nc" id="L175">                                break;</span>

                            case 10:
<span class="nc" id="L178">                                this.allInventoryItems.addAll(this.createCar(&quot;Infiniti6&quot;, &quot;G35&quot;, 60));</span>
<span class="nc" id="L179">                                this.allInventoryItems.addAll(this.createCar(&quot;Infiniti6&quot;, &quot;EX35&quot;, 50));</span>

<span class="nc" id="L181">                                break;</span>

                            case 11:
<span class="nc" id="L184">                                this.allInventoryItems.addAll(this.createCar(&quot;Infiniti7&quot;, &quot;G35&quot;, 60));</span>
<span class="nc" id="L185">                                this.allInventoryItems.addAll(this.createCar(&quot;Infiniti7&quot;, &quot;EX35&quot;, 50));</span>

<span class="nc" id="L187">                                break;</span>

                            case 12:
<span class="nc" id="L190">                                this.allInventoryItems.addAll(this.createCar(&quot;Infiniti8&quot;, &quot;G35&quot;, 60));</span>
<span class="nc" id="L191">                                this.allInventoryItems.addAll(this.createCar(&quot;Infiniti8&quot;, &quot;EX35&quot;, 50));</span>

<span class="nc" id="L193">                                break;</span>

                            case 13:
<span class="nc" id="L196">                                this.allInventoryItems.addAll(this.createCar(&quot;Infiniti9&quot;, &quot;G35&quot;, 60));</span>
<span class="nc" id="L197">                                this.allInventoryItems.addAll(this.createCar(&quot;Infiniti9&quot;, &quot;EX35&quot;, 50));</span>

<span class="nc" id="L199">                                break;</span>

                            case 14:
<span class="nc" id="L202">                                this.allInventoryItems.addAll(this.createCar(&quot;Infiniti10&quot;, &quot;G35&quot;, 60));</span>
<span class="nc" id="L203">                                this.allInventoryItems.addAll(this.createCar(&quot;Infiniti10&quot;, &quot;EX35&quot;, 50));</span>

<span class="nc" id="L205">                                break;</span>

                            case 15:
<span class="nc" id="L208">                                this.allInventoryItems.addAll(this.createCar(&quot;Infiniti11&quot;, &quot;G35&quot;, 60));</span>
<span class="nc" id="L209">                                this.allInventoryItems.addAll(this.createCar(&quot;Infiniti11&quot;, &quot;EX35&quot;, 50));</span>

<span class="nc" id="L211">                                break;</span>

                            case 16:
<span class="nc" id="L214">                                this.allInventoryItems.addAll(this.createCar(&quot;Infiniti12&quot;, &quot;G35&quot;, 60));</span>
<span class="nc" id="L215">                                this.allInventoryItems.addAll(this.createCar(&quot;Infiniti12&quot;, &quot;EX35&quot;, 50));</span>

<span class="nc" id="L217">                                break;</span>

                            case 17:
<span class="nc" id="L220">                                this.allInventoryItems.addAll(this.createCar(&quot;Infiniti13&quot;, &quot;G35&quot;, 60));</span>
<span class="nc" id="L221">                                this.allInventoryItems.addAll(this.createCar(&quot;Infiniti13&quot;, &quot;EX35&quot;, 50));</span>

<span class="nc" id="L223">                                break;</span>

                            case 18:
<span class="nc" id="L226">                                this.allInventoryItems.addAll(this.createCar(&quot;Infiniti14&quot;, &quot;G35&quot;, 60));</span>
<span class="nc" id="L227">                                this.allInventoryItems.addAll(this.createCar(&quot;Infiniti14&quot;, &quot;EX35&quot;, 50));</span>

<span class="nc" id="L229">                                break;</span>

                            default:
                                break;
                        }
<span class="nc" id="L234">                    } catch (final Exception e) {</span>
<span class="nc" id="L235">                        e.printStackTrace();</span>
<span class="nc" id="L236">                    }</span>
                }
<span class="nc" id="L238">                this.logger.info(&quot;Ended building car list&quot;);</span>
<span class="nc" id="L239">                this.logger.info(&quot;Car List follows: {}&quot;, this);</span>
            }
<span class="nc" id="L241">        }</span>
<span class="nc" id="L242">        return this.allInventoryItems;</span>
    }

    public List&lt;String&gt; getAllVendors() {
<span class="nc" id="L246">        final List&lt;String&gt; result = new ArrayList&lt;String&gt;();</span>
<span class="nc bnc" id="L247" title="All 2 branches missed.">        for (final InventoryVendorList vendorList : this.getInventoryVendorLists()) {</span>
<span class="nc" id="L248">            result.add(vendorList.getVendor());</span>
<span class="nc" id="L249">        }</span>
<span class="nc" id="L250">        return result;</span>
    }

    public List&lt;InventoryVendorList&gt; getInventoryVendorLists() {
<span class="nc" id="L254">        synchronized (this) {</span>
<span class="nc bnc" id="L255" title="All 2 branches missed.">            if (this.inventoryVendorLists == null) {</span>
<span class="nc" id="L256">                this.inventoryVendorLists = new ArrayList&lt;InventoryVendorList&gt;();</span>
<span class="nc" id="L257">                final List&lt;InventoryItem&gt; inventoryItems = this.getAllInventoryItems();</span>

<span class="nc" id="L259">                Collections.sort(inventoryItems, new Comparator&lt;InventoryItem&gt;() {</span>
                    @Override
                    public int compare(final InventoryItem o1, final InventoryItem o2) {
<span class="nc" id="L262">                        return o1.getVendor().compareTo(o2.getVendor());</span>
                    }
                });
<span class="nc" id="L265">                final Iterator&lt;InventoryItem&gt; iterator = inventoryItems.iterator();</span>
<span class="nc" id="L266">                InventoryVendorList vendorList = new InventoryVendorList();</span>
<span class="nc" id="L267">                vendorList.setVendor(inventoryItems.get(0).getVendor());</span>
<span class="nc bnc" id="L268" title="All 2 branches missed.">                while (iterator.hasNext()) {</span>
<span class="nc" id="L269">                    final InventoryItem item = iterator.next();</span>
<span class="nc" id="L270">                    final InventoryVendorItem newItem = new InventoryVendorItem();</span>
<span class="nc" id="L271">                    CarsBean.itemToVendorItem(item, newItem);</span>
<span class="nc bnc" id="L272" title="All 2 branches missed.">                    if (!item.getVendor().equals(vendorList.getVendor())) {</span>
<span class="nc" id="L273">                        this.inventoryVendorLists.add(vendorList);</span>
<span class="nc" id="L274">                        vendorList = new InventoryVendorList();</span>
<span class="nc" id="L275">                        vendorList.setVendor(item.getVendor());</span>
                    }
<span class="nc" id="L277">                    vendorList.getVendorItems().add(newItem);</span>
<span class="nc" id="L278">                }</span>
<span class="nc" id="L279">                this.inventoryVendorLists.add(vendorList);</span>
            }
<span class="nc" id="L281">        }</span>
<span class="nc" id="L282">        return this.inventoryVendorLists;</span>
    }

    public List&lt;SelectItem&gt; getVendorOptions() {
<span class="nc" id="L286">        final List&lt;SelectItem&gt; result = new ArrayList&lt;SelectItem&gt;();</span>
<span class="nc" id="L287">        result.add(new SelectItem(&quot;&quot;, &quot;&quot;));</span>
<span class="nc bnc" id="L288" title="All 2 branches missed.">        for (final InventoryVendorList vendorList : this.getInventoryVendorLists()) {</span>
<span class="nc" id="L289">            result.add(new SelectItem(vendorList.getVendor()));</span>
<span class="nc" id="L290">        }</span>
<span class="nc" id="L291">        return result;</span>
    }

    public void remove() {
<span class="nc" id="L295">        this.allInventoryItems.remove(this.allInventoryItems.get(this.currentCarIndex));</span>
<span class="nc" id="L296">    }</span>

    public void store() {
<span class="nc" id="L299">        this.allInventoryItems.set(this.currentCarIndex, this.editedCar);</span>
<span class="nc" id="L300">    }</span>

    public void switchAjaxLoading(final ValueChangeEvent event) {
<span class="nc bnc" id="L303" title="All 2 branches missed.">        this.clientRows = ((Boolean) event.getNewValue()).booleanValue() ? CarsBean.CLIENT_ROWS_IN_AJAX_MODE : 0;</span>
<span class="nc" id="L304">    }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.2.201409121644</span></div></body></html>